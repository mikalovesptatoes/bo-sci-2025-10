<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>Collage App</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <aside>
    <h1>Collage App</h1>

    <div class="row">
      <label>写真をアップロード</label>
      <input id="fileInput" type="file" accept="image/*" />
    </div>

    <div class="row">
      <label>スタンプ（選択してからキャンバスをクリック）</label>
      <div class="thumbs" id="thumbs"></div>
    </div>

    <!-- サムネ(#thumbs)の直下に置く行 -->
    <div class="row action-bar">
      <button id="undoBtn" class="icon-btn ghost" aria-label="ひとつ前に戻る" title="ひとつ前に戻る (Ctrl+Z)">
        <svg viewBox="0 0 24 24" width="22" height="22" aria-hidden="true">
          <!-- corner-left-up 的な戻る矢印（角は丸め、ストローク太め） -->
          <path d="M9 9H5l4-4" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M5 9h7a7 7 0 0 1 7 7v0" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
       <!-- 選択中のスタンプを削除 -->
      <button id="deleteSelectedBtn" class="icon-btn danger" aria-label="選択中を削除" title="選択中を削除 (Delete)">
        <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true">
          <path d="M3 6h18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M10 11v6M14 11v6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
      <!-- 全部消す（全取り消し） -->
      <button id="clearAllBtn" class="icon-btn warning" aria-label="全部消す" title="全部消す（全取り消し）">
        <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true">
          <!-- ゴミ箱本体 -->
          <path d="M3 6h18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <!-- キラッ（スター）右上に重ねる -->
          <path d="M18.5 2.8l.6 1.3 1.4.2-1.1 1 .3 1.4-1.2-.7-1.2.7.3-1.4-1.1-1 1.4-.2z"
                fill="currentColor" />
        </svg>
      </button>
      <button id="flipXBtn" type="button">水平反転</button>
    </div>

    <div class="row">
      <label>透明度 <span id="alphaOut">40%</span></label>
      <input id="alpha" type="range" min="0.2" max="1" step="0.01" value="0.52" />
    </div>

    <!-- 色の選択 -->
    <div class="row" id="colorRow">
      <label for="color">
        <strong>色の選択</strong>
        <span class="preview-dot" id="colorPreview" aria-hidden="true"></span>
        <span id="colorOut">#FFFFFF</span>
      </label>

      <div class="color-picker">
        <input id="color" type="color" value="#ffffff" aria-label="カラーピッカー" />
        <div class="swatches" id="swatches" role="listbox" aria-label="プリセット色">
          <!-- よく使う色（必要に応じて増減OK） -->
          <button type="button" class="swatch" data-color="#000000" title="黒" aria-label="黒" role="option"></button>
          <button type="button" class="swatch" data-color="#ffffff" title="白" aria-label="白" role="option"></button>
          <button type="button" class="swatch" data-color="#FF3B30" title="赤" aria-label="赤" role="option"></button>
          <button type="button" class="swatch" data-color="#FF9500" title="オレンジ" aria-label="オレンジ" role="option"></button>
          <button type="button" class="swatch" data-color="#FFCC00" title="黄" aria-label="黄" role="option"></button>
          <button type="button" class="swatch" data-color="#34C759" title="緑" aria-label="緑" role="option"></button>
          <button type="button" class="swatch" data-color="#007AFF" title="青" aria-label="青" role="option"></button>
          <button type="button" class="swatch" data-color="#5856D6" title="紫" aria-label="紫" role="option"></button>
          <button type="button" class="swatch" data-color="#FF2D55" title="ピンク" aria-label="ピンク" role="option"></button>
        </div>
      </div>
    </div>

    <!-- 作品を保存（PNG） -->
    <div class="aside-footer">
      <button id="saveWorkBtn" class="primary-btn" aria-label="作品を保存">
        <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true">
          <!-- download icon -->
          <path d="M12 3v12m0 0l-4-4m4 4l4-4" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M5 19h14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <span>作品を保存</span>
      </button>
    </div>
  </aside>

  <main>
    <div id="stageWrap">
      <canvas id="stage" width="1200" height="800"></canvas>
    </div>
  </main>
  <script src="./app.js" defer></script>
</body>
</html>
